{"openapi":"3.0.0","info":{"title":"CLARK Gateway","version":"2.26.6","description":"The API gateway for all of the CLARK microservices","license":{"name":"ISC","url":"https://www.isc.org/licenses/"},"contact":{"name":"SecurEd Inc","url":"http://secured.team/","email":"skaza@towson.edu"},"x-logo":{"url":"http://secured.team/assets/images/logo.png","altText":"CLARK Logo"},"x-tagGroups":[{"name":"Library Service","tags":["Library Service"]},{"name":"Notification Service","tags":["Notification Service"]},{"name":"Feature Service","tags":["Feature Service"]},{"name":"Rating Service","tags":["Rating Service"]},{"name":"Outcome Service","tags":["Outcome Service"]},{"name":"User Service","tags":["User Service"]}]},"servers":[{"url":"http://localhost:3001","description":"Development"},{"url":"https://api-gateway.clark.center","description":"Production"}],"paths":{"/featured/learning-objects":{"get":{"description":"Gets a list of featured objects","tags":["Feature Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LearningObject"}}}}}}},"patch":{"description":"Updates the list of featured objects","tags":["Feature Service"],"requestBody":{"description":"The cuid, version, and author's username","required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LearningObject"}}}}},"responses":{"201":{"description":"CREATED","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Learning Objects Updated"}}}}}},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User does not have privilege to update featured objects"}}}},"/users/{username}/learning-objects/{learningObjectId}/outcomes/{outcomeId}/mappings/{mappingId}":{"delete":{"description":"Removes a mapping from a object's outcome","tags":["Guideline Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the author for the learning object"},{"in":"path","name":"learningObjectId","schema":{"type":"string"},"required":true,"description":"The id of the learning object (not cuid)"},{"in":"path","name":"outcomeId","schema":{"type":"string"},"required":true,"description":"The id of the outcome"},{"in":"path","name":"mappingId","schema":{"type":"string"},"required":true,"description":"The id of the mapping"}],"responses":{"204":{"description":"NO CONTENT"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Another user is trying to access a author's outcome on a object"},"404":{"description":"NOT FOUND - Object, mapping, outcome, or user not found"}}}},"/outcomes/stats":{"get":{"description":"Gets the stats of outcomes","tags":["Guideline Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"apply":{"type":"integer","required":true,"example":10},"evaluate":{"type":"integer","required":true,"example":20},"remember":{"type":"integer","required":true,"example":30}}}}}}}}},"/learning-objects/metrics":{"get":{"description":"Gets the learning object metrics for CLARK","tags":["Library Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Metric"}}}},"404":{"description":"NOT FOUND - No metrics were found"}}}},"/users/{username}/learning-objects/{cuid}/metrics":{"get":{"description":"Gets the metrics for a learning object","tags":["Library Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The author's username"},{"in":"path","name":"cuid","schema":{"type":"string"},"required":true,"description":"The cuid of the learning object"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"saves":{"type":"integer","description":"The number of saves for a particular object","example":200},"downloads":{"type":"integer","description":"The number of downloads for a particular object","example":100}}}}}},"404":{"description":"NOT FOUND - No metrics were found for the specific username and cuid"}}}},"/{username}/library/learning-objects":{"get":{"description":"Gets a user's library","tags":["Library Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the user's library"},{"in":"query","name":"page","schema":{"type":"integer"},"required":true,"description":"The current page of the library"},{"in":"query","name":"limit","schema":{"type":"integer"},"required":true,"description":"The number of objects to return"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"userLibraryItems":{"type":"array","items":{"$ref":"#/components/schemas/LibraryItem"},"required":true},"lastPage":{"type":"integer","required":false,"example":2}}}}}},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access another user's library"},"404":{"description":"NOT FOUND - User not found"}}},"post":{"description":"Adds a learning object to the user's library","tags":["Library Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the user's library"}],"requestBody":{"description":"The cuid, version, and author's username","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"cuid":{"type":"string","description":"The cuid of the learning object to save","required":true,"example":"00000000-1111-2222-3333-444444444444"},"version":{"type":"integer","description":"The version of the learning object","required":true,"example":1},"authorUsername":{"type":"string","description":"The username of the object's author","required":true,"example":"jdoe1"}}}}}},"responses":{"201":{"description":"CREATED - Successfully added to library"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access and modify another user's library"},"404":{"description":"NOT FOUND - User or learning object not found"}}}},"/{username}/library/learning-objects/{cuid}":{"delete":{"description":"Deletes an item from the user's library","tags":["Library Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the user's library"},{"in":"path","name":"cuid","schema":{"type":"string"},"required":true,"description":"The cuid of the learning object to remove"}],"responses":{"204":{"description":"NO CONTENT - Successfully deleted from library"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access and modify another user's library"},"404":{"description":"NOT FOUND - User or learning object not found"}}}},"/users/{username}/notifications":{"get":{"description":"Gets a user's update notifications","tags":["Notification Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the user"},{"in":"query","name":"page","schema":{"type":"number"},"required":true,"description":"The current page"},{"in":"query","name":"limit","schema":{"type":"number"},"required":true,"description":"The notification limit to send back in the request"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"lastPage":{"type":"number","example":1,"required":true},"notifications":{"type":"array","items":{"$ref":"#/components/schemas/Notification"},"required":true}}}}}},"400":{"description":"BAD CONTENT - Page and limit query parameters must be greater then zero"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access another user's notifications"},"404":{"description":"NOT FOUND - User not found"}}}},"/users/{username}/notifications/{id}":{"delete":{"description":"Deletes a notification for a user","tags":["Notification Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the user"},{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The id of the notification"}],"responses":{"204":{"description":"NO CONTENT"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to delete another user's notifications"},"404":{"description":"NOT FOUND - User or notification not found"}}}},"/users/{username}/learning-objects/{CUID}/version/{version}/ratings":{"get":{"description":"Gets the ratings for a learning object","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"The cuid of the object","example":"00000000-1111-2222-3333-444444444444"},"avgValue":{"type":"number","description":"The average rating value","example":5},"ratings":{"type":"array","description":"The array of ratings left on the object","items":{"$ref":"#/components/schemas/Rating"}}}}}}},"404":{"description":"NOT FOUND - Learning object not found"}}},"post":{"description":"Creates a rating on a object","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"}],"requestBody":{"description":"The rating information to create","required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Rating"}}}},"responses":{"204":{"description":"NO CONTENT"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Object attempting to rate is in review (not released)"},"404":{"description":"NOT FOUND - Learning object was not found"}}}},"/ratings/{ratingId}":{"get":{"description":"Gets a specific rating by id","tags":["Rating Service"],"parameters":[{"in":"path","name":"ratingId","schema":{"type":"string"},"required":true,"description":"The rating id"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Rating"}}}},"404":{"description":"NOT FOUND - Rating was not found"}}}},"/users/{username}/learning-objects/{CUID}/version/{version}/ratings/{ratingID}":{"patch":{"description":"Updates a rating on a object","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating to update"}],"requestBody":{"description":"The rating information to update","required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Rating"}}}},"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access and modify another user's rating"},"404":{"description":"NOT FOUND - Rating or object was not found"}}},"delete":{"description":"Deletes a rating from a learning object","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating to delete"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User is trying to access and modify another user's rating"},"404":{"description":"NOT FOUND - Rating or object was not found"}}}},"/users/{username}/learning-objects/{CUID}/version/{version}/ratings/{ratingID}/flags":{"post":{"description":"Flags a rating to be reviewed","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating"}],"requestBody":{"description":"The flag information to create","required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Flag"}}}},"responses":{"204":{"description":"NO CONTENT"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Author is attempting to flag a rating"},"404":{"description":"NOT FOUND - Learning object or rating was not found"}}}},"/users/{username}/learning-objects/{CUID}/version/{version}/ratings/{ratingID}/responses":{"post":{"description":"Creates a response to a rating","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating"}],"requestBody":{"description":"The flag information to create","required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Response"}}}},"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Is not author or contributor"},"404":{"description":"NOT FOUND - Learning object or rating was not found"}}}},"/users/{username}/learning-objects/{CUID}/version/{version}/ratings/{ratingID}/responses/{responseID}":{"delete":{"description":"Deletes a response","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating"},{"in":"path","name":"responseID","schema":{"type":"string"},"required":true,"description":"The id of the response"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Is not the creator of the response"},"404":{"description":"NOT FOUND - Learning object, rating, or response was not found"}}},"patch":{"description":"Updates a response","tags":["Rating Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The username of the object's author"},{"in":"path","name":"CUID","schema":{"type":"string"},"required":true,"description":"The cuid of the object"},{"in":"path","name":"version","schema":{"type":"number"},"required":true,"description":"The version number of the object"},{"in":"path","name":"ratingID","schema":{"type":"string"},"required":true,"description":"The id of the rating"},{"in":"path","name":"responseID","schema":{"type":"string"},"required":true,"description":"The id of the response"}],"requestBody":{"description":"The flag information to create","required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/Response"}}}},"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - Is not the creator of the response"},"404":{"description":"NOT FOUND - Learning object, rating, or response was not found"}}}},"/guidelines/members":{"get":{"description":"Gets users with mapper access group","tags":["User Service"],"responses":{"200":{"description":"Gets a list of mappers","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin"}}}},"/guidelines/members/{memberId}":{"put":{"description":"Adds a new mapper","tags":["User Service"],"parameters":[{"in":"path","name":"memberId","schema":{"type":"string"},"required":true,"description":"The id of the user to give mapper privileges to"}],"responses":{"201":{"description":"CREATED"},"400":{"description":"BAD REQUEST - User already has the mapper privilege"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin"},"404":{"description":"NOT FOUND - User not found"}}},"delete":{"description":"Removes the mapper privilege of a user","tags":["User Service"],"parameters":[{"in":"path","name":"memberId","schema":{"type":"string"},"required":true,"description":"The id of the user to revoke privileges of"}],"responses":{"204":{"description":"NO CONTENT"},"400":{"description":"BAD REQUEST - The user doesn't have the mapper privilege"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin"},"404":{"description":"NOT FOUND - User not found"}}}},"/users/identifiers/active":{"get":{"description":"Checks if a current user is using a username","tags":["User Service"],"parameters":[{"in":"query","name":"username","schema":{"type":"string"},"required":true,"description":"The username to check if in use"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"inUse":{"type":"boolean","description":"True if username is in use, false otherwise","example":true,"required":true}}}}}}}}},"/users/curators/{collection}":{"get":{"description":"Gets curators for a collection","tags":["User Service"],"parameters":[{"in":"path","name":"collection","schema":{"type":"string"},"required":true,"description":"The collection"}],"responses":{"200":{"description":"Gets a list of curators for a collection","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"404":{"description":"NOT FOUND - Collection not found"}}}},"/users/password":{"post":{"description":"Check if password matches","tags":["User Service"],"requestBody":{"description":"The typed password","required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"The user typed password","example":"M0ckPa$$word","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"isMatch":{"type":"boolean","description":"True if the username matches the provided password, false otherwise","example":true,"required":true}}}}}}}}},"/users/update":{"get":{"description":"Gets a user's information","tags":["User Service"],"parameters":[{"in":"query","name":"username","schema":{"type":"string"},"required":true,"description":"The user's username"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/User"}}}}}}},"/collections/{collectionName}/members":{"get":{"description":"Gets a list of collection reviewers","tags":["User Service"],"parameters":[{"in":"path","name":"collectionName","schema":{"type":"string"},"required":true,"description":"The collection's name"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}},"/collections/{collectionName}/members/{memberId}":{"put":{"description":"Assign a reviewer to a collection","tags":["User Service"],"parameters":[{"in":"path","name":"collectionName","schema":{"type":"string"},"required":true,"description":"The collection's name"},{"in":"path","name":"memberId","schema":{"type":"string"},"required":true,"description":"The id of the user"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin or collection curator"},"404":{"description":"NOT FOUND - User or collection not found"}}},"patch":{"description":"Edits a reviewer's privilege in a collection","tags":["User Service"],"parameters":[{"in":"path","name":"collectionName","schema":{"type":"string"},"required":true,"description":"The collection's name"},{"in":"path","name":"memberId","schema":{"type":"string"},"required":true,"description":"The id of the user"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin or collection curator"},"404":{"description":"NOT FOUND - User or collection not found"}}},"delete":{"description":"Removes a reviewer's privilege in a collection","tags":["User Service"],"parameters":[{"in":"path","name":"collectionName","schema":{"type":"string"},"required":true,"description":"The collection's name"},{"in":"path","name":"memberId","schema":{"type":"string"},"required":true,"description":"The id of the user"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin or collection curator"},"404":{"description":"NOT FOUND - User or collection not found"}}}},"/users":{"get":{"description":"Gets an array of users","tags":["User Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","required":true,"description":"An array of user objects","items":{"$ref":"#/components/schemas/User"}},"total":{"type":"number","required":true,"example":10,"description":"The total number of users"}}}}}}}},"post":{"description":"Creates a user","tags":["User Service"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/UserBody"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","$ref":"#/components/schemas/UserBody"},"tokens":{"type":"object","properties":{"bearer":{"type":"string","required":true,"description":"Bearer token"},"openId":{"type":"string","required":true,"description":"The cognito id"},"user":{"type":"object","$ref":"#/components/schemas/UserBody"}}}}}}}}}},"patch":{"description":"Edits a user's info","tags":["User Service"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/UserBody"}}}},"responses":{"200":{"description":"OK"}}}},"/users/stats":{"get":{"description":"Gets the stats for a user","tags":["User Service"],"parameters":[{"in":"query","name":"username","schema":{"type":"string"},"required":true,"description":"The collection's name"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"accounts":{"type":"number","example":1,"required":true},"organizations":{"type":"number","example":1,"required":true}}}}}},"500":{"description":"INTERNAL SERVICE ERROR - Any error is thrown"}}}},"/users/tokens":{"post":{"description":"Login a user","tags":["User Service"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"description":"The user's username","example":"jdoe1","type":"string","required":true},"password":{"description":"The user's password","example":"M0ckPa$$word","type":"string","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","$ref":"#/components/schemas/UserBody"},"tokens":{"type":"object","properties":{"bearer":{"type":"string","required":true,"description":"Bearer token"},"openId":{"type":"string","required":true,"description":"The cognito id"},"user":{"type":"object","$ref":"#/components/schemas/UserBody"}}}}}}}},"400":{"description":"BAD REQUEST - Incorrect login credentials"}}},"get":{"description":"Gets the current user object","tags":["User Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"401":{"description":"UNAUTHENTICATED - User not logged in"}}}},"/users/{username}/profile":{"get":{"description":"Gets a user's profile","tags":["User Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The user's username"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}},"/users/tokens/refresh":{"get":{"description":"Refreshes a user's token","tags":["User Service"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","$ref":"#/components/schemas/UserBody"},"tokens":{"type":"object","properties":{"bearer":{"type":"string","required":true,"description":"Bearer token"},"openId":{"type":"string","required":true,"description":"The cognito id"},"user":{"type":"object","$ref":"#/components/schemas/UserBody"}}}}}}}}}}},"/users/{username}":{"delete":{"description":"Deletes a user by their id","tags":["User Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The user's id"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"},"403":{"description":"UNAUTHORIZED - User not an admin"}}}},"/users/organizations":{"get":{"description":"Searches for an organization","tags":["User Service"],"parameters":[{"in":"query","name":"query","schema":{"type":"string"},"required":true,"description":"The search query"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Organization"}}}}}}}},"/users/{username}/tokens":{"delete":{"description":"Logs out a user","tags":["User Service"],"parameters":[{"in":"path","name":"username","schema":{"type":"string"},"required":true,"description":"The user's username"}],"responses":{"200":{"description":"OK"},"401":{"description":"UNAUTHENTICATED - User not logged in"}}}},"/users/ota-codes":{"get":{"description":"Gets and validates a ota-code then redirects the user","tags":["User Service"],"parameters":[{"in":"query","name":"otaCode","schema":{"type":"string"},"required":true,"description":"The ota code to validate"}],"responses":{"200":{"description":"OK - Redirects user to verify email or reset password"}}},"post":{"description":"Sends a ota code email","tags":["User Service"],"parameters":[{"in":"query","name":"action","schema":{"type":"string"},"required":true,"description":"The type of action for the email"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","required":true,"description":"The email to send the ota code to","example":"jdoe1@gmail.com"}}}}}},"responses":{"200":{"description":"OK"},"400":{"description":"BAD REQUEST - Invalid action type"}}},"patch":{"description":"Resets a user's password","tags":["User Service"],"parameters":[{"in":"query","name":"otaCode","schema":{"type":"string"},"required":true,"description":"The ota code to validate"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"payload":{"type":"string","required":true,"description":"The new password"}}}}}},"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"LearningObject":{"properties":{"id":{"type":"string","description":"The id of the learning object","example":0,"required":true},"cuid":{"type":"string","description":"The cuid of the learning object","example":"00000000-1111-2222-3333-444444444444","required":true},"author":{"type":"object","description":"A partial user object of the learning object's author","$ref":"#/components/schemas/User","required":true},"collection":{"type":"string","description":"The collection the learning object belongs to","example":"nccp","required":true},"contributors":{"type":"array","description":"A optional array of extra contributors to the object","items":{"$ref":"#/components/schemas/User"},"required":true},"date":{"type":"string","description":"The date the learning object was created","example":0,"required":true},"description":{"type":"string","description":"The description of the learning object","example":"This is a description","required":true},"length":{"type":"string","description":"The length of the learning object","example":"nanomodule","required":true},"name":{"type":"string","description":"The name of the learning object","example":"This is a learning object name","required":true},"status":{"type":"string","description":"The current status of the learning object","example":"released","required":true},"resourceUris":{"type":"object","description":"The extra resource uris of the learning object","required":false,"$ref":"#/components/schemas/LearningObjectResourceUris"},"revisionUri":{"type":"string","description":"The new revision uri of the learning object","required":true},"version":{"type":"integer","description":"The current version of the learning object","example":1,"required":true},"levels":{"type":"array","description":"An array of appropriate academic levels to the object","items":{"type":"string","example":"undergraduate"},"required":true}}},"User":{"properties":{"id":{"type":"string","description":"The id of the user","example":0,"required":true},"bio":{"type":"string","description":"The bio of the user","example":"This is a bio","required":true},"cognitoIdentityId":{"type":"string","description":"The cognito id for files","example":0,"required":true},"createdAt":{"type":"string","description":"When the user was created","example":0,"required":true},"email":{"type":"string","description":"The email of the user","example":"jdoe1@gmail.com","required":true},"emailVerified":{"type":"boolean","description":"Whether their email was verified","example":true,"required":true},"name":{"type":"string","description":"The name of the user","example":"John Doe","required":true},"organization":{"type":"string","description":"The name of the organization the user belongs to","example":"Towson University","required":true},"username":{"type":"string","description":"The username of the user","example":"jdoe1","required":true}}},"LearningObjectResourceUris":{"properties":{"outcomes":{"type":"string","description":"The uri for the outcomes of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/outcomes","required":false},"children":{"type":"string","description":"The uri for the children of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/children","required":false},"materials":{"type":"string","description":"The uri for the materials of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/materials","required":false},"metrics":{"type":"string","description":"The uri for the metrics of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/metrics","required":false},"parents":{"type":"string","description":"The uri for the parents of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/parents","required":false},"ratings":{"type":"string","description":"The uri for the ratings of a learning object","example":"https://api-gateway.clark.center/users/jdoe1/learning-objects/000000000000000000000000/ratings","required":false}}},"Metric":{"required":["collection","metrics"],"properties":{"collection":{"type":"string","description":"The collection pulling metrics from","example":"learning-objects"},"metrics":{"type":"object","description":"The metrics","$ref":"#/components/schemas/MetricBody"}}},"MetricBody":{"required":["saves","downloads"],"properties":{"saves":{"type":"integer","description":"The number of saves for a particular collection","example":200},"downloads":{"type":"integer","description":"The number of downloads for a particular collection","example":100},"topDownloads":{"type":"array","description":"The top downloads of a particular collection","items":{"$ref":"#/components/schemas/Download"}}}},"Download":{"required":["downloads","learningObjectCuid"],"properties":{"downloads":{"type":"integer","description":"The number of downloads for a particular learning object","example":100},"learningObjectCuid":{"type":"string","description":"The cuid of the learning object","example":"00000000-1111-2222-3333-444444444444"}}},"LibraryItem":{"properties":{"savedOn":{"type":"string","description":"When the object was saved to the user's library","example":0,"required":true},"savedBy":{"type":"string","description":"The username of the user who saved the object","example":"jdoe1","required":true},"learningObject":{"type":"object","description":"The learning object saved to the library","$ref":"#/components/schemas/LearningObject"}}},"Notification":{"properties":{"id":{"type":"string","description":"The id of the notification","example":0,"required":true},"text":{"type":"string","description":"The description of the notification","example":"This is an example","required":true},"timestamp":{"type":"string","description":"The timestamp for when the notification was created","example":0,"required":true},"link":{"type":"string","description":"The link to the object","example":"https://clark.center/details/jdoe1/00000000-1111-2222-3333-444444444444","required":true},"attributes":{"type":"object","required":true,"additionalProperties":{"type":"string"}}}},"Rating":{"properties":{"_id":{"type":"string","description":"The id of the rating object","example":0,"required":true},"value":{"type":"number","description":"The rating value, an integer, out of 5","example":4,"required":true},"user":{"type":"object","description":"The user who left the rating","$ref":"#/components/schemas/RatingUser","required":false},"comment":{"type":"string","description":"The comment the person made on the rating","example":"This is an example comment","required":true},"date":{"type":"number","description":"The date the person created the rating","example":0,"required":true},"response":{"type":"array","description":"An array of potential responses to the rating","items":{"$ref":"#/components/schemas/Response"},"required":false},"source":{"type":"object","description":"The learning object source information","$ref":"#/components/schemas/RatingSource","required":false}}},"Response":{"properties":{"_id":{"type":"string","description":"The id of the response object","example":0,"required":true},"user":{"type":"object","description":"The user who left the response","$ref":"#/components/schemas/RatingUser","required":true},"comment":{"type":"string","description":"The comment the person made on the response","example":"This is an example comment","required":true},"date":{"type":"number","description":"The date the person created the response","example":0,"required":true},"source":{"type":"object","description":"The learning object source information","$ref":"#/components/schemas/RatingSource"}}},"Flag":{"properties":{"_id":{"type":"string","description":"The id of the flag","example":0,"required":true},"comment":{"type":"string","description":"The comment for why the rating was flagged","example":"This is a flagged rating","required":true},"ratingId":{"type":"string","description":"The id of the rating flagged","example":0,"required":true},"date":{"type":"number","description":"The time when the rating was flagged","example":0,"required":true},"username":{"type":"string","description":"The username of the person who flagged the rating","example":"jdoe1","required":true},"concern":{"type":"string","description":"The type of the flag","example":"Other","required":true}}},"RatingUser":{"properties":{"username":{"type":"string","description":"The username of the person who left the rating","example":"jdoe1","required":true},"name":{"type":"string","description":"The name of the person who left the rating","example":"John Doe","required":true},"email":{"type":"string","description":"The email of the person who left the rating","example":"jdoe1@gmail.com","required":true}}},"RatingSource":{"properties":{"cuid":{"type":"string","description":"The cuid of the object","example":"00000000-1111-2222-3333-444444444444","required":true},"version":{"type":"number","description":"The version of the object","example":1,"required":true}}},"UserBody":{"properties":{"email":{"type":"string","description":"The email of the user","example":"jdoe1@gmail.com","required":true},"password":{"type":"string","description":"The password of the user","example":"M0ckPa$$word","required":true},"username":{"type":"string","description":"The username of the user","example":"jdoe1","required":true},"name":{"type":"string","description":"The name of the user","example":"John Doe","required":true},"organization":{"type":"string","description":"The name of the organization the user belongs to","example":"Towson University","required":true},"bio":{"type":"string","description":"The bio of the user","example":"This is a bio","required":true}}},"Organization":{"properties":{"id":{"type":"string","description":"The id of the organization","example":0,"required":true},"institution":{"type":"string","description":"The name of the organization","example":"Towson University","required":true}}}}},"tags":[]}